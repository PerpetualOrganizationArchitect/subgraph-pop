specVersion: 1.3.0
indexerHints:
  prune: auto
schema:
  file: ./schema.graphql
# Contract Addresses:
# PoaManager: 0xF8a26534f53fA89Ed89fA5814d167BFFc7645769
# ImplementationRegistry: 0x0D102FD80DF9368b735C7914dec90823F7F60938
# OrgRegistry: 0x7eFF3962d71a83C4d8C5fba4aF65D54E5513F0A4
# GovernanceFactory: 0x7138B8f5C02E75ebA4C557410dd84d5da2DcF643
# GlobalAccountRegistry: 0x6441247BCc1eDFf6213314D6910651401F99BbAE
# PaymasterHub: 0x15C8539Bee81dA1e3fC81f283F70f234a41fA690
# OrgDeployer: 0x35df5Fd21cEE486E130e0321D43EF2a916aEA758
dataSources:
  - kind: ethereum
    name: OrgDeployer
    network: hoodi
    source:
      address: "0x35df5Fd21cEE486E130e0321D43EF2a916aEA758"
      abi: OrgDeployer
      startBlock: 1470950
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - Organization
      abis:
        - name: OrgDeployer
          file: ./abis/OrgDeployer.json
      eventHandlers:
        - event: OrgDeployed(indexed bytes32,indexed address,address,address,address,address,address,address,address,address,address,uint256,uint256[])
          handler: handleOrgDeployed
      file: ./src/org-deployer.ts
  # - kind: ethereum
  #   name: Beacon
  #   network: hoodi
  #   source:
  #     address: "0x0000000000000000000000000000000000000000" # TODO: Add Beacon contract address
  #     abi: Beacon
  #     startBlock: 1429671
  #   mapping:
  #     kind: ethereum/events
  #     apiVersion: 0.0.9
  #     language: wasm/assemblyscript
  #     entities:
  #       - BeaconUpgrade
  #     abis:
  #       - name: Beacon
  #         file: ./abis/Beacon.json
  #     eventHandlers:
  #       - event: Upgraded(indexed address)
  #         handler: handleUpgraded
  #     file: ./src/beacon.ts
  - kind: ethereum
    name: GovernanceFactory
    network: hoodi
    source:
      address: "0x7138B8f5C02E75ebA4C557410dd84d5da2DcF643"
      abi: GovernanceFactory
      startBlock: 1470950
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - GovernanceModule
      abis:
        - name: GovernanceFactory
          file: ./abis/GovernanceFactory.json
      eventHandlers:
        - event: ModuleDeployed(indexed bytes32,indexed bytes32,address,address,bool,address)
          handler: handleModuleDeployed
      file: ./src/governance-factory.ts
  - kind: ethereum
    name: UniversalAccountRegistry
    network: hoodi
    source:
      address: "0x6441247BCc1eDFf6213314D6910651401F99BbAE"
      abi: UniversalAccountRegistry
      startBlock: 1470950
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - UniversalAccountRegistry
        - Account
        - UsernameChange
        - AccountDeletion
        - BatchRegistration
        - RegistryOwnershipTransfer
      abis:
        - name: UniversalAccountRegistry
          file: ./abis/UniversalAccountRegistry.json
      eventHandlers:
        - event: Initialized(uint64)
          handler: handleInitialized
        - event: UserRegistered(indexed address,string)
          handler: handleUserRegistered
        - event: UsernameChanged(indexed address,string)
          handler: handleUsernameChanged
        - event: UserDeleted(indexed address,string)
          handler: handleUserDeleted
        - event: BatchRegistered(uint256)
          handler: handleBatchRegistered
        - event: OwnershipTransferred(indexed address,indexed address)
          handler: handleOwnershipTransferred
      file: ./src/universal-account-registry.ts
templates:
  - kind: ethereum
    name: TaskManager
    network: hoodi
    source:
      abi: TaskManager
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - Project
        - Task
        - TaskApplication
      abis:
        - name: TaskManager
          file: ./abis/TaskManager.json
      eventHandlers:
        - event: ProjectCreated(indexed bytes32,bytes,uint256)
          handler: handleProjectCreated
        - event: ProjectDeleted(indexed bytes32,bytes)
          handler: handleProjectDeleted
        - event: TaskCreated(indexed uint256,indexed bytes32,uint256,address,uint256,bool,bytes)
          handler: handleTaskCreated
        - event: TaskAssigned(indexed uint256,indexed address,indexed address)
          handler: handleTaskAssigned
        - event: TaskClaimed(indexed uint256,indexed address)
          handler: handleTaskClaimed
        - event: TaskSubmitted(indexed uint256,bytes)
          handler: handleTaskSubmitted
        - event: TaskCompleted(indexed uint256,indexed address)
          handler: handleTaskCompleted
        - event: TaskCancelled(indexed uint256,indexed address)
          handler: handleTaskCancelled
        - event: TaskUpdated(indexed uint256,uint256,address,uint256,bytes)
          handler: handleTaskUpdated
        - event: TaskApplicationSubmitted(indexed uint256,indexed address,bytes32)
          handler: handleTaskApplicationSubmitted
        - event: TaskApplicationApproved(indexed uint256,indexed address,indexed address)
          handler: handleTaskApplicationApproved
      file: ./src/task-manager.ts
  - kind: ethereum
    name: HybridVoting
    network: hoodi
    source:
      abi: HybridVoting
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - HybridVotingContract
        - HybridVotingHatPermission
        - HybridVotingTargetPermission
        - HybridVotingQuorumChange
        - HybridVotingExecutorChange
        - Proposal
        - Vote
      abis:
        - name: HybridVoting
          file: ./abis/HybridVoting.json
      eventHandlers:
        - event: Initialized(uint64)
          handler: handleInitialized
        - event: ExecutorUpdated(address)
          handler: handleExecutorUpdated
        - event: QuorumSet(uint8)
          handler: handleQuorumSet
        - event: HatSet(uint8,uint256,bool)
          handler: handleHatSet
        - event: HatToggled(indexed uint256,bool)
          handler: handleHatToggled
        - event: TargetAllowed(address,bool)
          handler: handleTargetAllowed
        - event: NewProposal(indexed uint256,indexed address,bytes,uint8,uint64,uint64,bool)
          handler: handleNewProposal
        - event: NewHatProposal(indexed uint256,indexed address,bytes,uint8,uint64,uint64,uint256[],bool)
          handler: handleNewHatProposal
        - event: VoteCast(indexed uint256,indexed address,uint8[],uint8[],uint256[],uint64)
          handler: handleVoteCast
        - event: Winner(indexed uint256,indexed uint256,bool,bool,uint64)
          handler: handleWinner
        - event: ProposalExecuted(indexed uint256,indexed uint256,uint256)
          handler: handleProposalExecuted
      file: ./src/hybrid-voting.ts
  - kind: ethereum
    name: DirectDemocracyVoting
    network: hoodi
    source:
      abi: DirectDemocracyVoting
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - DirectDemocracyVotingContract
        - DirectDemocracyVotingHatPermission
        - DirectDemocracyVotingCreatorHatPermission
        - DirectDemocracyVotingTargetPermission
        - DirectDemocracyVotingQuorumChange
        - DirectDemocracyVotingExecutorChange
        - DDVProposal
        - DDVVote
      abis:
        - name: DirectDemocracyVoting
          file: ./abis/DirectDemocracyVoting.json
      eventHandlers:
        - event: Initialized(uint64)
          handler: handleInitialized
        - event: ExecutorUpdated(address)
          handler: handleExecutorUpdated
        - event: QuorumPercentageSet(uint8)
          handler: handleQuorumPercentageSet
        - event: HatSet(uint8,uint256,bool)
          handler: handleHatSet
        - event: HatToggled(indexed uint256,bool)
          handler: handleHatToggled
        - event: CreatorHatSet(uint256,bool)
          handler: handleCreatorHatSet
        - event: TargetAllowed(address,bool)
          handler: handleTargetAllowed
        - event: NewProposal(uint256,bytes,uint8,uint64,uint64)
          handler: handleNewProposal
        - event: NewHatProposal(uint256,bytes,uint8,uint64,uint64,uint256[])
          handler: handleNewHatProposal
        - event: VoteCast(uint256,address,uint8[],uint8[])
          handler: handleVoteCast
        - event: Winner(uint256,uint256,bool)
          handler: handleWinner
        - event: ProposalCleaned(uint256,uint256)
          handler: handleProposalCleaned
      file: ./src/direct-democracy-voting.ts
  - kind: ethereum
    name: EligibilityModule
    network: hoodi
    source:
      abi: EligibilityModule
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - EligibilityModuleContract
        - Hat
        - WearerEligibility
        - VouchConfig
        - Vouch
        - UserJoinTime
      abis:
        - name: EligibilityModule
          file: ./abis/EligibilityModule.json
      eventHandlers:
        - event: EligibilityModuleInitialized(indexed address,indexed address)
          handler: handleEligibilityModuleInitialized
        - event: HatCreatedWithEligibility(indexed address,indexed uint256,indexed uint256,bool,bool,uint256)
          handler: handleHatCreatedWithEligibility
        - event: WearerEligibilityUpdated(indexed address,indexed uint256,bool,bool,indexed address)
          handler: handleWearerEligibilityUpdated
        - event: BulkWearerEligibilityUpdated(address[],indexed uint256,bool,bool,indexed address)
          handler: handleBulkWearerEligibilityUpdated
        - event: DefaultEligibilityUpdated(indexed uint256,bool,bool,indexed address)
          handler: handleDefaultEligibilityUpdated
        - event: VouchConfigSet(indexed uint256,uint32,uint256,bool,bool)
          handler: handleVouchConfigSet
        - event: Vouched(indexed address,indexed address,indexed uint256,uint32)
          handler: handleVouched
        - event: VouchRevoked(indexed address,indexed address,indexed uint256,uint32)
          handler: handleVouchRevoked
        - event: HatClaimed(indexed address,indexed uint256)
          handler: handleHatClaimed
        - event: UserJoinTimeSet(indexed address,indexed uint256)
          handler: handleUserJoinTimeSet
        - event: EligibilityModuleAdminHatSet(indexed uint256)
          handler: handleEligibilityModuleAdminHatSet
        - event: SuperAdminTransferred(indexed address,indexed address)
          handler: handleSuperAdminTransferred
        - event: Paused(indexed address)
          handler: handlePaused
        - event: Unpaused(indexed address)
          handler: handleUnpaused
      file: ./src/eligibility-module.ts
  - kind: ethereum
    name: ParticipationToken
    network: hoodi
    source:
      abi: ParticipationToken
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - ParticipationTokenContract
        - ParticipationTokenMemberHat
        - ParticipationTokenApproverHat
        - TokenRequest
        - TokenBalance
      abis:
        - name: ParticipationToken
          file: ./abis/ParticipationToken.json
      eventHandlers:
        - event: Initialized(uint64)
          handler: handleInitialized
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: MemberHatSet(uint256,bool)
          handler: handleMemberHatSet
        - event: ApproverHatSet(uint256,bool)
          handler: handleApproverHatSet
        - event: Requested(indexed uint256,indexed address,uint96,string)
          handler: handleRequested
        - event: RequestApproved(indexed uint256,indexed address)
          handler: handleRequestApproved
        - event: RequestCancelled(indexed uint256,indexed address)
          handler: handleRequestCancelled
        - event: TaskManagerSet(indexed address)
          handler: handleTaskManagerSet
        - event: EducationHubSet(indexed address)
          handler: handleEducationHubSet
      file: ./src/participation-token.ts
  - kind: ethereum
    name: QuickJoin
    network: hoodi
    source:
      abi: QuickJoin
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - QuickJoinContract
        - QuickJoinMemberHat
        - QuickJoinEvent
        - QuickJoinExecutorChange
        - QuickJoinAddressUpdate
      abis:
        - name: QuickJoin
          file: ./abis/QuickJoin.json
      eventHandlers:
        - event: Initialized(uint64)
          handler: handleInitialized
        - event: QuickJoined(indexed address,bool,uint256[])
          handler: handleQuickJoined
        - event: QuickJoinedByMaster(indexed address,indexed address,bool,uint256[])
          handler: handleQuickJoinedByMaster
        - event: ExecutorUpdated(address)
          handler: handleExecutorUpdated
        - event: HatToggled(indexed uint256,bool)
          handler: handleHatToggled
        - event: MemberHatIdsUpdated(uint256[])
          handler: handleMemberHatIdsUpdated
        - event: AddressesUpdated(address,address,address)
          handler: handleAddressesUpdated
      file: ./src/quick-join.ts
  - kind: ethereum
    name: EducationHub
    network: hoodi
    source:
      abi: EducationHub
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - EducationHubContract
        - EducationModule
        - ModuleCompletion
        - ModuleUpdate
        - EducationHubCreatorHat
        - EducationHubMemberHat
        - EducationHubExecutorChange
        - EducationHubTokenChange
        - EducationHubHatsChange
        - EducationHubPauseEvent
      abis:
        - name: EducationHub
          file: ./abis/EducationHub.json
      eventHandlers:
        - event: Initialized(uint64)
          handler: handleInitialized
        - event: ModuleCreated(indexed uint256,uint256,bytes)
          handler: handleModuleCreated
        - event: ModuleCompleted(indexed uint256,indexed address)
          handler: handleModuleCompleted
        - event: ModuleUpdated(indexed uint256,uint256,bytes)
          handler: handleModuleUpdated
        - event: ModuleRemoved(indexed uint256)
          handler: handleModuleRemoved
        - event: CreatorHatSet(indexed uint256,bool)
          handler: handleCreatorHatSet
        - event: MemberHatSet(indexed uint256,bool)
          handler: handleMemberHatSet
        - event: HatToggled(indexed uint256,bool)
          handler: handleHatToggled
        - event: ExecutorSet(indexed address)
          handler: handleExecutorSet
        - event: TokenSet(indexed address)
          handler: handleTokenSet
        - event: HatsSet(indexed address)
          handler: handleHatsSet
        - event: Paused(address)
          handler: handlePaused
        - event: Unpaused(address)
          handler: handleUnpaused
      file: ./src/education-hub.ts
  - kind: ethereum
    name: PaymentManager
    network: hoodi
    source:
      abi: PaymentManager
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - PaymentManagerContract
        - Distribution
        - Claim
        - Payment
        - OptOutToggle
        - OwnershipTransfer
        - RevenueShareTokenChange
      abis:
        - name: PaymentManager
          file: ./abis/PaymentManager.json
      eventHandlers:
        - event: Initialized(uint64)
          handler: handleInitialized
        - event: DistributionCreated(indexed uint256,indexed address,uint256,uint256,bytes32)
          handler: handleDistributionCreated
        - event: DistributionClaimed(indexed uint256,indexed address,uint256)
          handler: handleDistributionClaimed
        - event: DistributionFinalized(indexed uint256,uint256)
          handler: handleDistributionFinalized
        - event: PaymentReceived(indexed address,uint256,indexed address)
          handler: handlePaymentReceived
        - event: OptOutToggled(indexed address,bool)
          handler: handleOptOutToggled
        - event: OwnershipTransferred(indexed address,indexed address)
          handler: handleOwnershipTransferred
        - event: RevenueShareTokenSet(indexed address)
          handler: handleRevenueShareTokenSet
      file: ./src/payment-manager.ts
