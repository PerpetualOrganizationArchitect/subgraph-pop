specVersion: 1.3.0
indexerHints:
  prune: auto
schema:
  file: ./schema.graphql
# Contract Addresses:
# PoaManager: 0x680F36c3a403f094430393c71b8E5D9dC91136b7
# ImplementationRegistry: 0x1b88d71FED58cBEe9B6559F0a79D4Dd19837a8CB
# OrgRegistry: 0x0b9e213DB7B2712Dad512919c6148003B28c2278
# GovernanceFactory: 0x7138B8f5C02E75ebA4C557410dd84d5da2DcF643
# AccessFactory: 0x3e43B9D4d254a18780Fd36515CFFfBe9100e8810
# ModulesFactory: 0x55E95d5A579fFfAF30Bfd507E4419f7acd3FA6aF
# HatsTreeSetup: 0x4B7998E30A5e425B8342FC7026F723986DD56A88
# PaymasterHub: 0x434416F85f6eAb0E9B87F71fe5c31469CdAA208C
# OrgDeployer: 0x49F91059F4A5Bd08B548DD74b4FA3BbC9BB3Fc18
dataSources:
  - kind: ethereum
    name: OrgDeployer
    network: hoodi
    source:
      address: "0x49F91059F4A5Bd08B548DD74b4FA3BbC9BB3Fc18"
      abi: OrgDeployer
      startBlock: 1467520
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - Organization
      abis:
        - name: OrgDeployer
          file: ./abis/OrgDeployer.json
      eventHandlers:
        - event: OrgDeployed(indexed bytes32,indexed address,address,address,address,address,address,address,address)
          handler: handleOrgDeployed
      file: ./src/org-deployer.ts
  # - kind: ethereum
  #   name: Beacon
  #   network: hoodi
  #   source:
  #     address: "0x0000000000000000000000000000000000000000" # TODO: Add Beacon contract address
  #     abi: Beacon
  #     startBlock: 1429671
  #   mapping:
  #     kind: ethereum/events
  #     apiVersion: 0.0.9
  #     language: wasm/assemblyscript
  #     entities:
  #       - BeaconUpgrade
  #     abis:
  #       - name: Beacon
  #         file: ./abis/Beacon.json
  #     eventHandlers:
  #       - event: Upgraded(indexed address)
  #         handler: handleUpgraded
  #     file: ./src/beacon.ts
  - kind: ethereum
    name: GovernanceFactory
    network: hoodi
    source:
      address: "0x7138B8f5C02E75ebA4C557410dd84d5da2DcF643"
      abi: GovernanceFactory
      startBlock: 1467520
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - GovernanceModule
      abis:
        - name: GovernanceFactory
          file: ./abis/GovernanceFactory.json
      eventHandlers:
        - event: ModuleDeployed(indexed bytes32,indexed bytes32,address,address,bool,address)
          handler: handleModuleDeployed
      file: ./src/governance-factory.ts
templates:
  - kind: ethereum
    name: TaskManager
    network: hoodi
    source:
      abi: TaskManager
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - Project
        - Task
        - TaskApplication
      abis:
        - name: TaskManager
          file: ./abis/TaskManager.json
      eventHandlers:
        - event: ProjectCreated(indexed bytes32,bytes,uint256)
          handler: handleProjectCreated
        - event: ProjectDeleted(indexed bytes32,bytes)
          handler: handleProjectDeleted
        - event: TaskCreated(indexed uint256,indexed bytes32,uint256,address,uint256,bool,bytes)
          handler: handleTaskCreated
        - event: TaskAssigned(indexed uint256,indexed address,indexed address)
          handler: handleTaskAssigned
        - event: TaskClaimed(indexed uint256,indexed address)
          handler: handleTaskClaimed
        - event: TaskSubmitted(indexed uint256,bytes)
          handler: handleTaskSubmitted
        - event: TaskCompleted(indexed uint256,indexed address)
          handler: handleTaskCompleted
        - event: TaskCancelled(indexed uint256,indexed address)
          handler: handleTaskCancelled
        - event: TaskUpdated(indexed uint256,uint256,address,uint256,bytes)
          handler: handleTaskUpdated
        - event: TaskApplicationSubmitted(indexed uint256,indexed address,bytes32)
          handler: handleTaskApplicationSubmitted
        - event: TaskApplicationApproved(indexed uint256,indexed address,indexed address)
          handler: handleTaskApplicationApproved
      file: ./src/task-manager.ts
  - kind: ethereum
    name: HybridVoting
    network: hoodi
    source:
      abi: HybridVoting
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - HybridVotingContract
        - HybridVotingHatPermission
        - HybridVotingTargetPermission
        - HybridVotingQuorumChange
        - HybridVotingExecutorChange
        - Proposal
        - Vote
      abis:
        - name: HybridVoting
          file: ./abis/HybridVoting.json
      eventHandlers:
        - event: Initialized(uint64)
          handler: handleInitialized
        - event: ExecutorUpdated(address)
          handler: handleExecutorUpdated
        - event: QuorumSet(uint8)
          handler: handleQuorumSet
        - event: HatSet(uint8,uint256,bool)
          handler: handleHatSet
        - event: HatToggled(indexed uint256,bool)
          handler: handleHatToggled
        - event: TargetAllowed(address,bool)
          handler: handleTargetAllowed
        - event: NewProposal(indexed uint256,indexed address,bytes,uint8,uint64,uint64,bool)
          handler: handleNewProposal
        - event: NewHatProposal(indexed uint256,indexed address,bytes,uint8,uint64,uint64,uint256[],bool)
          handler: handleNewHatProposal
        - event: VoteCast(indexed uint256,indexed address,uint8[],uint8[],uint256[],uint64)
          handler: handleVoteCast
        - event: Winner(indexed uint256,indexed uint256,bool,bool,uint64)
          handler: handleWinner
        - event: ProposalExecuted(indexed uint256,indexed uint256,uint256)
          handler: handleProposalExecuted
      file: ./src/hybrid-voting.ts
  - kind: ethereum
    name: DirectDemocracyVoting
    network: hoodi
    source:
      abi: DirectDemocracyVoting
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - DirectDemocracyVotingContract
        - DirectDemocracyVotingHatPermission
        - DirectDemocracyVotingCreatorHatPermission
        - DirectDemocracyVotingTargetPermission
        - DirectDemocracyVotingQuorumChange
        - DirectDemocracyVotingExecutorChange
        - DDVProposal
        - DDVVote
      abis:
        - name: DirectDemocracyVoting
          file: ./abis/DirectDemocracyVoting.json
      eventHandlers:
        - event: Initialized(uint64)
          handler: handleInitialized
        - event: ExecutorUpdated(address)
          handler: handleExecutorUpdated
        - event: QuorumPercentageSet(uint8)
          handler: handleQuorumPercentageSet
        - event: HatSet(uint8,uint256,bool)
          handler: handleHatSet
        - event: HatToggled(indexed uint256,bool)
          handler: handleHatToggled
        - event: CreatorHatSet(uint256,bool)
          handler: handleCreatorHatSet
        - event: TargetAllowed(address,bool)
          handler: handleTargetAllowed
        - event: NewProposal(uint256,bytes,uint8,uint64,uint64)
          handler: handleNewProposal
        - event: NewHatProposal(uint256,bytes,uint8,uint64,uint64,uint256[])
          handler: handleNewHatProposal
        - event: VoteCast(uint256,address,uint8[],uint8[])
          handler: handleVoteCast
        - event: Winner(uint256,uint256,bool)
          handler: handleWinner
        - event: ProposalCleaned(uint256,uint256)
          handler: handleProposalCleaned
      file: ./src/direct-democracy-voting.ts
