specVersion: 1.3.0
indexerHints:
  prune: auto
schema:
  file: ./schema.graphql
# Beacon Addresses (for subgraph indexing):
# BEACON_ImplementationRegistry: 0xC74d0e3D6928dbE1bb251C90b96Cd1Df53372E28
# BEACON_OrgRegistry: 0xf0Fe0a6D815cCae29d2072186F5F90cB2A404b1B
# BEACON_OrgDeployer: 0x68856c174D4B60334A9c5fa256B56e06fFf59624
# BEACON_PaymasterHub: 0xC9198A859A1E4211E8f56F8919d02495F17bAf41
# BEACON_HybridVoting: 0x6ccdc7c16BF466028f5E2a56066a06f60EDe6984
# BEACON_DirectDemocracyVoting: 0xB5a769A07Ee0C1C22689a11beC1a958D44354B67
# BEACON_Executor: 0xfde9554eD68a97cb7608856D8E634C2Bf6582B6d
# BEACON_QuickJoin: 0xF3561C2b6Aa4531C7fd4375F3098a7Dbe5Abc28D
# BEACON_ParticipationToken: 0x813d271D49b63f8cDE3eA7Ff6577F2E47C06c6D2
# BEACON_TaskManager: 0x26513C9209d413949b3d14e3b474fA800BEAf418
# BEACON_EducationHub: 0xA8C4f3D80cF7dcB12729b902c044603F09559F3E
# BEACON_PaymentManager: 0xDA06902B66663c9Ede2927A6b5991262253B36C8
# BEACON_UniversalAccountRegistry: 0xEa45D9E9D1A6e07F62e23987Aa4a8Eb88Db85D6c
# BEACON_EligibilityModule: 0x750461BC70b0482f78859637724C79d7c89b8D46
# BEACON_ToggleModule: 0x85550cf0e61ee19616AFed1f5caA77F28b35DEc0
# NOTE: Infrastructure contracts (OrgDeployer, OrgRegistry, PaymasterHub, UniversalAccountRegistry)
# are now dynamically discovered via InfrastructureDeployed event from PoaManager.
# Only PoaManager and singleton factories need to be hardcoded.
dataSources:
  # - kind: ethereum
  #   name: Beacon
  #   network: hoodi
  #   source:
  #     address: "0x0000000000000000000000000000000000000000" # TODO: Add Beacon contract address
  #     abi: Beacon
  #     startBlock: 1429671
  #   mapping:
  #     kind: ethereum/events
  #     apiVersion: 0.0.9
  #     language: wasm/assemblyscript
  #     entities:
  #       - BeaconUpgrade
  #     abis:
  #       - name: Beacon
  #         file: ./abis/Beacon.json
  #     eventHandlers:
  #       - event: Upgraded(indexed address)
  #         handler: handleUpgraded
  #     file: ./src/beacon.ts
  - kind: ethereum
    name: GovernanceFactory
    network: hoodi
    source:
      address: "0x009f271c7Cf88BF3d5Baf0484097db4E790189Fd"
      abi: GovernanceFactory
      startBlock: 2078457
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - GovernanceModule
      abis:
        - name: GovernanceFactory
          file: ./abis/GovernanceFactory.json
      eventHandlers:
        - event: ModuleDeployed(indexed bytes32,indexed bytes32,address,address,bool,address)
          handler: handleModuleDeployed
      file: ./src/governance-factory.ts
  - kind: ethereum
    name: PoaManager
    network: hoodi
    source:
      address: "0x91ADe310CA1d78d8EE68F9619674b3A2a906148b"
      abi: PoaManager
      startBlock: 2078486
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - PoaManagerContract
        - Beacon
        - BeaconUpgradeEvent
        - RegistryUpdate
      abis:
        - name: PoaManager
          file: ./abis/PoaManager.json
      eventHandlers:
        - event: BeaconCreated(indexed bytes32,string,address,address)
          handler: handleBeaconCreated
        - event: BeaconUpgraded(indexed bytes32,address,string)
          handler: handleBeaconUpgraded
        - event: RegistryUpdated(address,address)
          handler: handleRegistryUpdated
        - event: InfrastructureDeployed(address,address,address,address,address,address)
          handler: handleInfrastructureDeployed
      file: ./src/poa-manager.ts
templates:
  # Infrastructure templates (dynamically created via InfrastructureDeployed event)
  - kind: ethereum
    name: OrgDeployer
    network: hoodi
    source:
      abi: OrgDeployer
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - Organization
      abis:
        - name: OrgDeployer
          file: ./abis/OrgDeployer.json
      eventHandlers:
        - event: OrgDeployed(indexed bytes32,indexed address,address,address,address,address,address,address,address,address,address,uint256,uint256[])
          handler: handleOrgDeployed
        - event: RolesCreated(indexed bytes32,uint256[],string[],string[],bytes32[],bool[])
          handler: handleRolesCreated
      file: ./src/org-deployer.ts
  - kind: ethereum
    name: OrgRegistry
    network: hoodi
    source:
      abi: OrgRegistry
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - OrgRegistryContract
        - Organization
        - OrgMetaUpdate
        - RegisteredContract
        - AutoUpgradeChange
      abis:
        - name: OrgRegistry
          file: ./abis/OrgRegistry.json
      eventHandlers:
        - event: OrgRegistered(indexed bytes32,indexed address,bytes,bytes32)
          handler: handleOrgRegistered
        - event: MetaUpdated(indexed bytes32,bytes,bytes32)
          handler: handleMetaUpdated
        - event: ContractRegistered(indexed bytes32,indexed bytes32,indexed bytes32,address,address,bool,address)
          handler: handleContractRegistered
        - event: AutoUpgradeSet(indexed bytes32,bool)
          handler: handleAutoUpgradeSet
        - event: HatsTreeRegistered(indexed bytes32,uint256,uint256[])
          handler: handleHatsTreeRegistered
      file: ./src/org-registry.ts
  - kind: ethereum
    name: PaymasterHub
    network: hoodi
    source:
      abi: PaymasterHub
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - PaymasterHubContract
        - PaymasterOrgConfig
        - PaymasterRule
        - PaymasterBudget
        - PaymasterFeeCaps
        - PaymasterBountyConfig
        - PaymasterOrgStats
        - PaymasterDepositEvent
        - BountyEvent
        - UsageEvent
        - UserOpEvent
        - SolidarityEvent
        - PaymasterConfigChange
        - GracePeriodChange
        - PauseToggle
        - OrgBanRecord
      abis:
        - name: PaymasterHub
          file: ./abis/PaymasterHub.json
      eventHandlers:
        - event: PaymasterInitialized(indexed address,indexed address,indexed address)
          handler: handlePaymasterInitialized
        - event: OrgRegistered(indexed bytes32,uint256,uint256)
          handler: handleOrgRegistered
        - event: RuleSet(indexed bytes32,indexed address,indexed bytes4,bool,uint32)
          handler: handleRuleSet
        - event: BudgetSet(indexed bytes32,bytes32,uint128,uint32,uint32)
          handler: handleBudgetSet
        - event: FeeCapsSet(indexed bytes32,uint256,uint256,uint32,uint32,uint32)
          handler: handleFeeCapsSet
        - event: PauseSet(indexed bytes32,bool)
          handler: handlePauseSet
        - event: OperatorHatSet(indexed bytes32,uint256)
          handler: handleOperatorHatSet
        - event: DepositIncrease(uint256,uint256)
          handler: handleDepositIncrease
        - event: DepositWithdraw(indexed address,uint256)
          handler: handleDepositWithdraw
        - event: OrgDepositReceived(indexed bytes32,indexed address,uint256)
          handler: handleOrgDepositReceived
        - event: BountyConfig(indexed bytes32,bool,uint96,uint16)
          handler: handleBountyConfig
        - event: BountyFunded(uint256,uint256)
          handler: handleBountyFunded
        - event: BountySweep(indexed address,uint256)
          handler: handleBountySweep
        - event: BountyPaid(indexed bytes32,indexed address,uint256)
          handler: handleBountyPaid
        - event: BountyPayFailed(indexed bytes32,indexed address,uint256)
          handler: handleBountyPayFailed
        - event: UsageIncreased(indexed bytes32,bytes32,uint256,uint128,uint32)
          handler: handleUsageIncreased
        - event: UserOpPosted(indexed bytes32,indexed address)
          handler: handleUserOpPosted
        - event: SolidarityFeeCollected(indexed bytes32,uint256)
          handler: handleSolidarityFeeCollected
        - event: SolidarityDonationReceived(indexed address,uint256)
          handler: handleSolidarityDonationReceived
        - event: OrgBannedFromSolidarity(indexed bytes32,bool)
          handler: handleOrgBannedFromSolidarity
        - event: EmergencyWithdraw(indexed address,uint256)
          handler: handleEmergencyWithdraw
        - event: GracePeriodConfigUpdated(uint32,uint128,uint128)
          handler: handleGracePeriodConfigUpdated
      file: ./src/paymaster-hub.ts
  - kind: ethereum
    name: UniversalAccountRegistry
    network: hoodi
    source:
      abi: UniversalAccountRegistry
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - UniversalAccountRegistry
        - Account
        - UsernameChange
        - AccountDeletion
        - BatchRegistration
        - RegistryOwnershipTransfer
      abis:
        - name: UniversalAccountRegistry
          file: ./abis/UniversalAccountRegistry.json
      eventHandlers:
        - event: Initialized(uint64)
          handler: handleInitialized
        - event: UserRegistered(indexed address,string)
          handler: handleUserRegistered
        - event: UsernameChanged(indexed address,string)
          handler: handleUsernameChanged
        - event: UserDeleted(indexed address,string)
          handler: handleUserDeleted
        - event: BatchRegistered(uint256)
          handler: handleBatchRegistered
        - event: OwnershipTransferred(indexed address,indexed address)
          handler: handleOwnershipTransferred
      file: ./src/universal-account-registry.ts
  # Org-level contract templates (dynamically created via OrgDeployed event)
  - kind: ethereum
    name: TaskManager
    network: hoodi
    source:
      abi: TaskManager
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - Project
        - Task
        - TaskApplication
        - ProjectManager
        - ProjectRolePermission
        - ProjectBountyCap
        - ProjectCapChange
        - BountyCapChange
      abis:
        - name: TaskManager
          file: ./abis/TaskManager.json
      eventHandlers:
        - event: ProjectCreated(indexed bytes32,bytes,bytes32,uint256)
          handler: handleProjectCreated
        - event: ProjectDeleted(indexed bytes32)
          handler: handleProjectDeleted
        - event: ProjectCapUpdated(indexed bytes32,uint256,uint256)
          handler: handleProjectCapUpdated
        - event: ProjectManagerUpdated(indexed bytes32,indexed address,bool)
          handler: handleProjectManagerUpdated
        - event: ProjectRolePermSet(indexed bytes32,indexed uint256,uint8)
          handler: handleProjectRolePermSet
        - event: BountyCapSet(indexed bytes32,indexed address,uint256,uint256)
          handler: handleBountyCapSet
        - event: TaskCreated(indexed uint256,indexed bytes32,uint256,address,uint256,bool,bytes,bytes32)
          handler: handleTaskCreated
        - event: TaskAssigned(indexed uint256,indexed address,indexed address)
          handler: handleTaskAssigned
        - event: TaskClaimed(indexed uint256,indexed address)
          handler: handleTaskClaimed
        - event: TaskSubmitted(indexed uint256,bytes32)
          handler: handleTaskSubmitted
        - event: TaskCompleted(indexed uint256,indexed address)
          handler: handleTaskCompleted
        - event: TaskCancelled(indexed uint256,indexed address)
          handler: handleTaskCancelled
        - event: TaskUpdated(indexed uint256,uint256,address,uint256,bytes,bytes32)
          handler: handleTaskUpdated
        - event: TaskApplicationSubmitted(indexed uint256,indexed address,bytes32)
          handler: handleTaskApplicationSubmitted
        - event: TaskApplicationApproved(indexed uint256,indexed address,indexed address)
          handler: handleTaskApplicationApproved
      file: ./src/task-manager.ts
  - kind: ethereum
    name: HybridVoting
    network: hoodi
    source:
      abi: HybridVoting
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - HybridVotingContract
        - HybridVotingHatPermission
        - HybridVotingTargetPermission
        - HybridVotingQuorumChange
        - HybridVotingExecutorChange
        - VotingClass
        - VotingClassChange
        - Proposal
        - Vote
      abis:
        - name: HybridVoting
          file: ./abis/HybridVoting.json
      eventHandlers:
        - event: Initialized(uint64)
          handler: handleInitialized
        - event: ExecutorUpdated(address)
          handler: handleExecutorUpdated
        - event: QuorumSet(uint8)
          handler: handleQuorumSet
        - event: HatSet(uint8,uint256,bool)
          handler: handleHatSet
        - event: HatToggled(indexed uint256,bool)
          handler: handleHatToggled
        - event: TargetAllowed(address,bool)
          handler: handleTargetAllowed
        - event: NewProposal(uint256,bytes,bytes32,uint8,uint64,uint64)
          handler: handleNewProposal
        - event: NewHatProposal(uint256,bytes,bytes32,uint8,uint64,uint64,uint256[])
          handler: handleNewHatProposal
        - event: VoteCast(indexed uint256,indexed address,uint8[],uint8[],uint256[],uint64)
          handler: handleVoteCast
        - event: Winner(indexed uint256,indexed uint256,bool,bool,uint64)
          handler: handleWinner
        - event: ProposalExecuted(indexed uint256,indexed uint256,uint256)
          handler: handleProposalExecuted
        - event: ClassesReplaced(indexed uint256,indexed bytes32,(uint8,uint8,bool,uint256,address,uint256[])[],uint64)
          handler: handleClassesReplaced
      file: ./src/hybrid-voting.ts
  - kind: ethereum
    name: DirectDemocracyVoting
    network: hoodi
    source:
      abi: DirectDemocracyVoting
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - DirectDemocracyVotingContract
        - DirectDemocracyVotingHatPermission
        - DirectDemocracyVotingCreatorHatPermission
        - DirectDemocracyVotingTargetPermission
        - DirectDemocracyVotingQuorumChange
        - DirectDemocracyVotingExecutorChange
        - DDVProposal
        - DDVVote
      abis:
        - name: DirectDemocracyVoting
          file: ./abis/DirectDemocracyVoting.json
      eventHandlers:
        - event: Initialized(uint64)
          handler: handleInitialized
        - event: ExecutorUpdated(address)
          handler: handleExecutorUpdated
        - event: QuorumPercentageSet(uint8)
          handler: handleQuorumPercentageSet
        - event: HatSet(uint8,uint256,bool)
          handler: handleHatSet
        - event: HatToggled(indexed uint256,bool)
          handler: handleHatToggled
        - event: CreatorHatSet(uint256,bool)
          handler: handleCreatorHatSet
        - event: TargetAllowed(address,bool)
          handler: handleTargetAllowed
        - event: NewProposal(uint256,bytes,bytes32,uint8,uint64,uint64)
          handler: handleNewProposal
        - event: NewHatProposal(uint256,bytes,bytes32,uint8,uint64,uint64,uint256[])
          handler: handleNewHatProposal
        - event: VoteCast(uint256,address,uint8[],uint8[])
          handler: handleVoteCast
        - event: Winner(uint256,uint256,bool)
          handler: handleWinner
        - event: ProposalCleaned(uint256,uint256)
          handler: handleProposalCleaned
      file: ./src/direct-democracy-voting.ts
  - kind: ethereum
    name: EligibilityModule
    network: hoodi
    source:
      abi: EligibilityModule
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - EligibilityModuleContract
        - Hat
        - WearerEligibility
        - VouchConfig
        - Vouch
        - UserJoinTime
        - VouchingRestrictionEvent
        - HatAutoMintEvent
        - HatClaimEvent
        - HatMetadataUpdateEvent
      abis:
        - name: EligibilityModule
          file: ./abis/EligibilityModule.json
      eventHandlers:
        - event: EligibilityModuleInitialized(indexed address,indexed address)
          handler: handleEligibilityModuleInitialized
        - event: HatCreatedWithEligibility(indexed address,indexed uint256,indexed uint256,bool,bool,uint256)
          handler: handleHatCreatedWithEligibility
        - event: WearerEligibilityUpdated(indexed address,indexed uint256,bool,bool,indexed address)
          handler: handleWearerEligibilityUpdated
        - event: BulkWearerEligibilityUpdated(address[],indexed uint256,bool,bool,indexed address)
          handler: handleBulkWearerEligibilityUpdated
        - event: DefaultEligibilityUpdated(indexed uint256,bool,bool,indexed address)
          handler: handleDefaultEligibilityUpdated
        - event: VouchConfigSet(indexed uint256,uint32,uint256,bool,bool)
          handler: handleVouchConfigSet
        - event: Vouched(indexed address,indexed address,indexed uint256,uint32)
          handler: handleVouched
        - event: VouchRevoked(indexed address,indexed address,indexed uint256,uint32)
          handler: handleVouchRevoked
        - event: HatClaimed(indexed address,indexed uint256)
          handler: handleHatClaimed
        - event: HatMetadataUpdated(indexed uint256,string,bytes32)
          handler: handleHatMetadataUpdated
        - event: UserJoinTimeSet(indexed address,indexed uint256)
          handler: handleUserJoinTimeSet
        - event: EligibilityModuleAdminHatSet(indexed uint256)
          handler: handleEligibilityModuleAdminHatSet
        - event: SuperAdminTransferred(indexed address,indexed address)
          handler: handleSuperAdminTransferred
        - event: Paused(indexed address)
          handler: handlePaused
        - event: Unpaused(indexed address)
          handler: handleUnpaused
        - event: VouchingRateLimitExceededEvent(indexed address)
          handler: handleVouchingRateLimitExceeded
        - event: NewUserVouchingRestrictedEvent(indexed address)
          handler: handleNewUserVouchingRestricted
      file: ./src/eligibility-module.ts
  - kind: ethereum
    name: ParticipationToken
    network: hoodi
    source:
      abi: ParticipationToken
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - ParticipationTokenContract
        - ParticipationTokenMemberHat
        - ParticipationTokenApproverHat
        - TokenRequest
        - TokenBalance
      abis:
        - name: ParticipationToken
          file: ./abis/ParticipationToken.json
      eventHandlers:
        - event: Initialized(uint64)
          handler: handleInitialized
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: MemberHatSet(uint256,bool)
          handler: handleMemberHatSet
        - event: ApproverHatSet(uint256,bool)
          handler: handleApproverHatSet
        - event: Requested(indexed uint256,indexed address,uint96,string)
          handler: handleRequested
        - event: RequestApproved(indexed uint256,indexed address)
          handler: handleRequestApproved
        - event: RequestCancelled(indexed uint256,indexed address)
          handler: handleRequestCancelled
        - event: TaskManagerSet(indexed address)
          handler: handleTaskManagerSet
        - event: EducationHubSet(indexed address)
          handler: handleEducationHubSet
      file: ./src/participation-token.ts
  - kind: ethereum
    name: QuickJoin
    network: hoodi
    source:
      abi: QuickJoin
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - QuickJoinContract
        - QuickJoinMemberHat
        - QuickJoinEvent
        - QuickJoinExecutorChange
        - QuickJoinAddressUpdate
      abis:
        - name: QuickJoin
          file: ./abis/QuickJoin.json
      eventHandlers:
        - event: Initialized(uint64)
          handler: handleInitialized
        - event: QuickJoined(indexed address,bool,uint256[])
          handler: handleQuickJoined
        - event: QuickJoinedByMaster(indexed address,indexed address,bool,uint256[])
          handler: handleQuickJoinedByMaster
        - event: ExecutorUpdated(address)
          handler: handleExecutorUpdated
        - event: HatToggled(indexed uint256,bool)
          handler: handleHatToggled
        - event: MemberHatIdsUpdated(uint256[])
          handler: handleMemberHatIdsUpdated
        - event: AddressesUpdated(address,address,address)
          handler: handleAddressesUpdated
        - event: UniversalFactoryUpdated(indexed address)
          handler: handleUniversalFactoryUpdated
        - event: QuickJoinedWithPasskey(indexed address,string,indexed bytes32,uint256[])
          handler: handleQuickJoinedWithPasskey
        - event: QuickJoinedWithPasskeyByMaster(indexed address,indexed address,string,indexed bytes32,uint256[])
          handler: handleQuickJoinedWithPasskeyByMaster
      file: ./src/quick-join.ts
  - kind: ethereum
    name: EducationHub
    network: hoodi
    source:
      abi: EducationHub
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - EducationHubContract
        - EducationModule
        - ModuleCompletion
        - ModuleUpdate
        - EducationHubCreatorHat
        - EducationHubMemberHat
        - EducationHubExecutorChange
        - EducationHubTokenChange
        - EducationHubHatsChange
        - EducationHubPauseEvent
      abis:
        - name: EducationHub
          file: ./abis/EducationHub.json
      eventHandlers:
        - event: Initialized(uint64)
          handler: handleInitialized
        - event: ModuleCreated(indexed uint256,bytes,bytes32,uint256)
          handler: handleModuleCreated
        - event: ModuleCompleted(indexed uint256,indexed address)
          handler: handleModuleCompleted
        - event: ModuleUpdated(indexed uint256,bytes,bytes32,uint256)
          handler: handleModuleUpdated
        - event: ModuleRemoved(indexed uint256)
          handler: handleModuleRemoved
        - event: CreatorHatSet(indexed uint256,bool)
          handler: handleCreatorHatSet
        - event: MemberHatSet(indexed uint256,bool)
          handler: handleMemberHatSet
        - event: HatToggled(indexed uint256,bool)
          handler: handleHatToggled
        - event: ExecutorSet(indexed address)
          handler: handleExecutorSet
        - event: TokenSet(indexed address)
          handler: handleTokenSet
        - event: HatsSet(indexed address)
          handler: handleHatsSet
        - event: Paused(address)
          handler: handlePaused
        - event: Unpaused(address)
          handler: handleUnpaused
      file: ./src/education-hub.ts
  - kind: ethereum
    name: PaymentManager
    network: hoodi
    source:
      abi: PaymentManager
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - PaymentManagerContract
        - Distribution
        - Claim
        - Payment
        - OptOutToggle
        - OwnershipTransfer
        - RevenueShareTokenChange
      abis:
        - name: PaymentManager
          file: ./abis/PaymentManager.json
      eventHandlers:
        - event: Initialized(uint64)
          handler: handleInitialized
        - event: DistributionCreated(indexed uint256,indexed address,uint256,uint256,bytes32)
          handler: handleDistributionCreated
        - event: DistributionClaimed(indexed uint256,indexed address,uint256)
          handler: handleDistributionClaimed
        - event: DistributionFinalized(indexed uint256,uint256)
          handler: handleDistributionFinalized
        - event: PaymentReceived(indexed address,uint256,indexed address)
          handler: handlePaymentReceived
        - event: OptOutToggled(indexed address,bool)
          handler: handleOptOutToggled
        - event: OwnershipTransferred(indexed address,indexed address)
          handler: handleOwnershipTransferred
        - event: RevenueShareTokenSet(indexed address)
          handler: handleRevenueShareTokenSet
      file: ./src/payment-manager.ts
  - kind: ethereum
    name: Executor
    network: hoodi
    source:
      abi: Executor
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - ExecutorContract
        - CallerChange
        - BatchExecution
        - CallExecution
        - ExecutorSweep
        - HatMinterAuthorization
        - HatsMintedEvent
        - ExecutorPauseEvent
        - ExecutorOwnershipTransfer
      abis:
        - name: Executor
          file: ./abis/Executor.json
      eventHandlers:
        - event: Initialized(uint64)
          handler: handleInitialized
        - event: CallerSet(indexed address)
          handler: handleCallerSet
        - event: BatchExecuted(indexed uint256,uint256)
          handler: handleBatchExecuted
        - event: CallExecuted(indexed uint256,indexed uint256,address,uint256)
          handler: handleCallExecuted
        - event: Swept(indexed address,uint256)
          handler: handleSwept
        - event: HatsSet(indexed address)
          handler: handleHatsSet
        - event: HatMinterAuthorized(indexed address,bool)
          handler: handleHatMinterAuthorized
        - event: HatsMinted(indexed address,uint256[])
          handler: handleHatsMinted
        - event: Paused(address)
          handler: handlePaused
        - event: Unpaused(address)
          handler: handleUnpaused
        - event: OwnershipTransferred(indexed address,indexed address)
          handler: handleOwnershipTransferred
      file: ./src/executor.ts
  - kind: ethereum
    name: ToggleModule
    network: hoodi
    source:
      abi: ToggleModule
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - ToggleModuleContract
        - HatToggleEvent
        - ToggleAdminTransfer
      abis:
        - name: ToggleModule
          file: ./abis/ToggleModule.json
      eventHandlers:
        - event: Initialized(uint64)
          handler: handleInitialized
        - event: ToggleModuleInitialized(indexed address)
          handler: handleToggleModuleInitialized
        - event: HatToggled(indexed uint256,bool)
          handler: handleHatToggled
        - event: AdminTransferred(indexed address,indexed address)
          handler: handleAdminTransferred
      file: ./src/toggle-module.ts
  # Passkey Account Factory template
  - kind: ethereum
    name: PasskeyAccountFactory
    network: hoodi
    source:
      abi: PasskeyAccountFactory
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - PasskeyAccountFactory
        - PasskeyAccount
      abis:
        - name: PasskeyAccountFactory
          file: ./abis/PasskeyAccountFactory.json
      eventHandlers:
        - event: AccountCreated(indexed address,bytes32,indexed address)
          handler: handleAccountCreated
        - event: GlobalConfigUpdated(address,uint48,uint8)
          handler: handleGlobalConfigUpdated
        - event: PoaManagerUpdated(indexed address,indexed address)
          handler: handlePoaManagerUpdated
        - event: PausedStateChanged(bool)
          handler: handlePausedStateChanged
      file: ./src/passkey-account-factory.ts
  # Passkey Account template (created dynamically when accounts are created)
  - kind: ethereum
    name: PasskeyAccount
    network: hoodi
    source:
      abi: PasskeyAccount
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - PasskeyAccount
        - PasskeyCredential
        - RecoveryRequest
        - PasskeyExecution
        - PasskeyBatchExecution
        - GuardianChange
      abis:
        - name: PasskeyAccount
          file: ./abis/PasskeyAccount.json
      eventHandlers:
        - event: CredentialAdded(indexed bytes32,uint64)
          handler: handleCredentialAdded
        - event: CredentialRemoved(indexed bytes32)
          handler: handleCredentialRemoved
        - event: CredentialStatusChanged(indexed bytes32,bool)
          handler: handleCredentialStatusChanged
        - event: GuardianUpdated(indexed address,indexed address)
          handler: handleGuardianUpdated
        - event: RecoveryDelayUpdated(uint48,uint48)
          handler: handleRecoveryDelayUpdated
        - event: RecoveryInitiated(indexed bytes32,bytes32,indexed address,uint48)
          handler: handleRecoveryInitiated
        - event: RecoveryCompleted(indexed bytes32,indexed bytes32)
          handler: handleRecoveryCompleted
        - event: RecoveryCancelled(indexed bytes32)
          handler: handleRecoveryCancelled
        - event: Executed(indexed address,uint256,bytes,bytes)
          handler: handleExecuted
        - event: BatchExecuted(uint256)
          handler: handleBatchExecuted
      file: ./src/passkey-account.ts
  # IPFS file data source for org metadata
  - kind: file/ipfs
    name: OrgMetadata
    network: hoodi
    mapping:
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      file: ./src/org-metadata.ts
      handler: handleOrgMetadata
      entities:
        - OrgMetadata
        - OrgMetadataLink
      abis:
        - name: OrgRegistry
          file: ./abis/OrgRegistry.json
  # IPFS file data source for hat metadata
  - kind: file/ipfs
    name: HatMetadata
    network: hoodi
    mapping:
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      file: ./src/hat-metadata.ts
      handler: handleHatMetadata
      entities:
        - HatMetadata
      abis:
        - name: EligibilityModule
          file: ./abis/EligibilityModule.json
  # IPFS file data source for task metadata
  - kind: file/ipfs
    name: TaskMetadata
    network: hoodi
    mapping:
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      file: ./src/task-metadata.ts
      handler: handleTaskMetadata
      entities:
        - TaskMetadata
        - Task
      abis:
        - name: TaskManager
          file: ./abis/TaskManager.json
  # IPFS file data source for submission metadata
  - kind: file/ipfs
    name: SubmissionMetadata
    network: hoodi
    mapping:
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      file: ./src/submission-metadata.ts
      handler: handleSubmissionMetadata
      entities:
        - SubmissionMetadata
        - Task
      abis:
        - name: TaskManager
          file: ./abis/TaskManager.json
